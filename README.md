# Домашнє завдання: База даних студентів (PostgreSQL + SQLAlchemy)

## Опис

Цей проєкт реалізує базу даних для обліку студентів, груп, викладачів, предметів та оцінок. Вся взаємодія здійснюється через CLI (аргументи командного рядка) або TUI-меню. Є можливість сидування (заповнення) бази випадковими даними.

---

## Встановлення та запуск

### 1. Клонування репозиторію

```bash
git clone https://github.com/EssenceMaks/goit-pythonweb-hw-06.git
cd goit-pythonweb-hw-06
```

### 2. Встановлення залежностей

```bash
pip install -r requirements.txt
```

### 3. Запуск PostgreSQL через Docker

```bash
docker run --name my-postgres -p 5432:5432 -e POSTGRES_PASSWORD=yourpassword -d postgres
```
- Замість `my-postgres` можна обрати свою назву контейнера.
- Пароль (`yourpassword`) використовуйте у файлі налаштувань підключення (див. `DB_URL` у seed.py та my_select.py).

### 4. Налаштування підключення до БД

1. Створіть файл `.env` у корені проєкту (можете скопіювати з `.env.example`):
   ```bash
   cp .env.example .env
   ```
2. Відредагуйте значення DB_URL у .env, вкажіть свій пароль:
   ```
   DB_URL=postgresql+psycopg2://postgres:yourpassword@localhost:5432/postgres
   ```
3. Не додавайте .env у репозиторій — він вже у .gitignore!

Усі підключення до БД у коді беруться з цієї змінної середовища.

### 5. Міграції Alembic

```bash
alembic upgrade head
```
---

## Сидування (заповнення) бази даними

```bash
python seed.py -a seed
```
- Далі оберіть режим: додати нові дані (без дублікатів) або перезаписати все.
- Кількість даних: ~75 студентів, 4-5 груп, 12 предметів, 7-8 викладачів, до 30 оцінок у кожного студента з усіх предметів.

---

## Функціонал CLI (аргументи argparse)

Всі CRUD-операції виконуються через аргументи командного рядка:

- `-a`, `--action`: дія (`create`, `list`, `update`, `remove`, `seed`)
- `-m`, `--model`: модель (`Teacher`, `Student`, `Group`, `Subject`)
- `-n`, `--name`: ім'я/назва
- `--id`: ідентифікатор об'єкта

### Приклади команд:

- Створити викладача:
  ```bash
  python seed.py -a create -m Teacher -n "Boris Jonson"
  ```
- Створити групу:
  ```bash
  python seed.py -a create -m Group -n "AD-101"
  ```
- Показати всіх студентів:
  ```bash
  python seed.py -a list -m Student
  ```
- Оновити назву предмета:
  ```bash
  python seed.py -a update -m Subject --id 2 -n "Математика"
  ```
- Видалити групу:
  ```bash
  python seed.py -a remove -m Group --id 1
  ```
- Сидування бази:
  ```bash
  python seed.py -a seed
  ```

---

## Функціонал TUI (меню)

Запустіть просто:
```bash
python seed.py
```

В меню доступно:
- CRUD-операції для всіх моделей
- Select-запити (10 основних вибірок)
- Перегляд складу (групи, викладачі, студенти)
- Поле ручного введення команди (можна виконати будь-яку CLI-команду)
- Вихід

---

## Select-запити (файл my_select.py)

1. Топ-5 студентів за середнім балом
2. Студенти з найвищим середнім по предмету
3. Середній бал у групі по предмету
4. Середній бал по всіх групах
5. Курси, які читає викладач
6. Список студентів у групі
7. Оцінки студентів у групі по предмету
8. Середній бал викладача
9. Курси, які відвідує студент
10. Оцінки студента по предмету

---

## Додатково
- Всі шаблони команд і меню — українською мовою.
- Дані генеруються через Faker.
- Всі дії можна виконувати як з меню, так і через CLI.

---

## Корисні команди
- Зупинити контейнер Postgres:
  ```bash
  docker stop my-postgres
  ```
- Видалити контейнер:
  ```bash
  docker rm my-postgres
  ```

---

## Автор
- Ваше ім'я, група, контакт
